# λ©μ°¨

1. [IoC μ»¨ν…μ΄λ„](#1-ioc-μ»¨ν…μ΄λ„-)
<br /></t>
   1.1 [ApplicationContext](#1-1.-ApplicationContext-π‘†)
<br /></t>
   1.2 [Autowired](#1-2.-@Autowired-π‘†)
<br /></t>
   1.3 [ComponentScan](#1-3.-@ComponentScan-π‘†)
<br /></t>
   1.4 [Bean μ¤μ½”ν”„](#1-4.-Bean-μ¤μ½”ν”„-π‘†)
2. λ¦¬μ†μ¤
3. Validation
4. λ°μ΄ν„° λ°”μΈλ”©
5. SpEL
6. μ¤ν”„λ§ AOP
7. Null-Safety





<br />

# 1. IoC μ»¨ν…μ΄λ„ [π‘†](#λ©μ°¨)

## μ •μ

### 1) IoC 

 : μ–΄λ–¤ κ°μ²΄κ°€ μ‚¬μ©ν•λ” μμ΅΄ κ°μ²΄λ¥Ό μ§μ ‘ λ§λ“¤μ–΄ μ‚¬μ©ν•λ”κ² μ•„λ‹λΌ, μ£Όμ… λ°›μ•„ μ‚¬μ©ν•λ” λ°©λ²•μ΄λ‹¤.

μ‰½κ² λ§ν•λ©΄,

```java
private BookRepository bookRepository;
```

μ΄λ ‡κ²λ§ μ„ μ–Έν•λ©΄ nullμΌν…λ°, μ¤ν”„λ§μ΄ `bookRepository` μ— λ€ν• μ •λ³΄λ¥Ό μ£Όμ…μ„ ν•΄μ¤μ„ λ°”λ΅ μ‚¬μ©μ„ ν•  μ μλ‹¤.



<br />

### 2) IoC μ»¨ν…μ΄λ„ 

 : Beanλ“¤μ„ κ°€μ§€κ³  IoC κΈ°λ¥μ„ μ κ³µν•λ” μ»¨ν…μ΄λ„μ΄λ‹¤.

ex)

- BeanFactory : IoCμ»¨ν…μ΄λ„ μµμƒμ„ μΈν„°νμ΄μ¤μ΄λ‹¤.
- ApplicationContext : BeanFactoryλ¥Ό μƒμ†λ°›μ€ IoCμ»¨ν…μ΄λ„λ΅, κ°€μ¥ λ§μ΄ μ‚¬μ©ν•λ‹¤.



<br />

### 3) Bean

 : **IoC μ»¨ν…μ΄λ„μ— μν•΄ κ΄€λ¦¬λλ” κ°μ²΄**μ΄λ‹¤.

#### μ¥μ 

1. IoCμ»¨ν…μ΄λ„μ— μν•΄ **μμ΅΄μ„± κ΄€λ¦¬**κ°€ λλ‹¤.

2. IoCμ»¨ν…μ΄λ„μ— λ“±λ΅λ Beanμ€ κΈ°λ³Έμ μΌλ΅ **μ‹±κΈ€ν†¤**μΌλ΅ λ“±λ΅λμ–΄ μ‹±κΈ€ν†¤μΌλ΅ μ‚¬μ©ν•λ ¤κ³  ν•  λ•, νΈν•λ‹¤.

   cf) μ¤μ½”ν”„

   - μ‹±κΈ€ν†¤ : ν•λ‚λ§ λ§λ“¤μ–΄μ„ μ „μ²΄μ— μ‚¬μ©ν•λ”κ²ƒ
   - ν”„λ΅ν† νƒ€μ… : λ§¤λ² λ‹¤λ¥Έ κ°μ²΄

3. **λΌμ΄ν”„ μ‚¬μ΄ν΄ μΈν„°νμ΄μ¤** λ΅ λ¶€κ°€μ μΈ μ‘μ—…μ„ ν•  μ μλ‹¤.

   (Beanμ— λ“±λ΅λλ©΄μ„ νΈμ¶λλ” λ©”μ„λ“λ“¤μ„ μ΄μ©ν•λ” κ²½μ°λ¥Ό λ§ν•λ‹¤.)



<br />

# 1-1. ApplicationContext [π‘†](#λ©μ°¨)

### 1) (κ³ μ „μ μΈ) Bean λ“±λ΅ λ°©λ²•

: μ¤ν”„λ§ IoC μ»¨ν…μ΄λ„λ” λΉμ„¤μ •(xml) νμΌμ΄ μμ–΄μ•Όν•λ‹¤. κ°€λ Ή, `BookService` κ°€ `BookRepository` λ¥Ό μ£Όμ…λ°›λ”λ‹¤κ³  ν•΄λ³΄μ.

```java
public class BookService{
   BookRepository bookRepository;

   public void setBookRepository(BookRepository bookRepository){
      this.bookRepository = bookRepository;
   }
}
```

μ΄λ¥Ό μ„ν•΄μ„λ”, λ‹¤μκ³Ό κ°™μ΄ μΌμΌμ΄ BeanμΌλ΅ λ“±λ΅μ„ ν•΄μ¤μ•Ό ν–λ‹¤.

**application.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  	<!-- μ—¬κΈ°λ¶€ν„° -->
    <bean id="bookRepository"
        class="com.example.demo.BookRepository">
    </bean>
    
    <bean id="bookService"
        class="com.example.demo.BookService">
        <property name="bookRepository" ref="bookRepository" />
    </bean>
  	<!-- μ—¬κΈ°κΉμ§€ μ£Όλ© -->
  
</beans>
```

<br />
μ΄λ° λ¶νΈν•¨μ„ ν•΄κ²°ν•λ” λ°©λ²•μ΄ Component ScanμΌλ΅ κ°„νΈν•κ² λΉμ„ λ“±λ΅ν•λ” κ²ƒμ΄λ‹¤.

**application.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">

   <!-- μ—¬κΈ°λ¶€ν„° -->
    <context:component-scan base-package="com.example.demo" />
   <!-- μ—¬κΈ°κΉμ§€ μ£Όλ© -->
</beans>
```

μ„μ²λΌ ν•΄μ£Όλ©΄,
 - Bean λ“±λ΅ : @Component, @Service, @Repository, @Configuration+@Bean μ΅°ν•© λ“±
 - μμ΅΄μ„± μ£Όμ… : @Autowired, μƒμ„±μ, setter λ“±

cf) μ°Έκ³ λ΅, @SpringBookApplication μ–΄λ…Έν…μ΄μ…μ— @ComponentScanμ΄ μλ‹¤.



<br />

# 1-2. @Autowired [π‘†](#λ©μ°¨)

### **1) μ‚¬μ©ν•  μ μλ” μ„μΉ**
 - μƒμ„±μ (μ¤ν”„λ§ 4.3λ¶€ν„°λ” μƒλµ κ°€λ¥)
 - μ„Έν„°
 - ν•„λ“

 cf) @Autowired(required = false) λΌλ” μµμ…μ„ μ£Όλ©΄, μμ΅΄μ„± μ£Όμ… μ—†μ΄λ„ μƒμ„±μ΄ λκ² ν•  μ μλ‹¤.

<br />

### **2) Beanμ΄ μ—¬λ¬κ°μΈ κ²½μ°, μ²λ¦¬ λ°©λ²•**

<br />

*BookRepository.java*

```java
public interface BookRepository{

}
```

*FirstBookRepository.java*
```java
@Repository
public class FirstBookRepository implements BookRepository{

}
```

*SecondBookRepository.java*

```java
@Repository
public class SecondBookRepository implements BookRepository{

}
```

<br />

μ΄λ ‡κ² λλ©΄, BookRepositoryνƒ€μ…μ Beanμ΄ 2κ°κ°€ μƒκ²Όλ”λ°, λ‹¤μκ³Ό κ°™μ΄ BookRepositoryλ¥Ό μ£Όμ…λ°›μΌλ ¤κ³  ν•λ©΄, λ‹¤μμ μƒν™©μ—μ„ FirstBookRepository μ™€ SecondBookRepository μ¤‘μ— μ–΄λ–¤ Repositoryλ¥Ό μ£Όμ…λ°›μ„κΉ?

<br />

*BookService.java*
```java
@Service
public class BookService{
   @Autowired
   BookRepository bookRepository;
}
```

<br />

### **2-1) κ²°κ³Ό**

 : μ—λ¬κ°€ λ‚λ‹¤.

<br />

### **2-2) ν•΄κ²° λ°©λ²•**

**1. @Primary μ΄μ©** (μ¶”μ²)
<br />

 : Beanλ“¤ μ¤‘ κ°€μ¥ μ°μ„ μμ„λ¥Ό λ†’μ—¬μ„ λ‹¤λ¥Έ κ³³μ—μ„ μ£Όμ…ν•λ ¤κ³  ν•  λ•, @Primary μ–΄λ…Έν…μ΄μ…μ΄ μλ” Beanμ„ μ£Όμ…λ°›λ„λ΅ ν•λ‹¤.

 ```java
@Repository @Primary
public class FirstBookRepository implements BookRepository{

}
 ```
<br />

**2. @Qualifier μ΄μ©**
<br />

 : μ–΄λ–¤ Beanμ„ μ£Όμ…λ°›μ„ μ§€λ¥Ό λ…μ‹ν•λ‹¤.

 ```java
@Service
public class BookService{
   @Autowired @Qualifier("FirstBookRepository")
   BookRepository bookRepository;
}
 ```

<br />

**3. μ—¬λ¬ Beanλ“¤ λ¨λ‘ μ£Όμ…**
<br />

 : List νƒ€μ…μΌλ΅ μ—¬λ¬ Beanλ“¤μ„ λ¨λ‘ μ£Όμ…λ°›λ„λ΅ ν•λ‹¤.

```java
@Service
public class BookService{
   @Autowired
   List<BookRepository> bookRepositories;  // FristBookRepository, SecondBookRepsitory
}
```

<br />

**4. νΈλ¦­** (λΉ„μ¶”μ²)
<br />

 : ν•„λ“λ…μ„ μ£Όμ…λ°›κ³  μ‹¶μ€ Bean μ΄λ¦„μΌλ΅ ν•λ‹¤. (μ²«κΈ€μ μ†λ¬Έμ, κ·Έ μ™Έ λ™μΌν•κ²)

 ```java
@Service
public class BookService{
   @Autowired
   BookRepository firstBookRepository;
}
 ```


 <br />

# 1-3. @ComponentScan [π‘†](#λ©μ°¨)

### **1) μ¤μΊ” λ™μ‘**

 - @ComponentScan μ–΄λ…Έν…μ΄μ…μ΄ μλ” κ³³λ¶€ν„° μ¤μΊ”μ΄ μ‹μ‘λλ‹¤. 
 - @SpringBootApplicationμ΄ @ComponentScanμ„ λ‹΄κ³  μλ‹¤.
 - @SpringBootApplicationμ΄ μλ” ν¨ν‚¤μ§€ μ•μ— μλ” κ²ƒλ“¤λ§ μ¤μΊ”μ΄ κ°€λ¥ν•λ‹¤.
 - @Component μ–΄λ…Έν…μ΄μ…μ΄ μλ” κ²ƒλ“¤μ„ μ¤μΊ”ν•λ‹¤.
 - @Filterλ΅ μ¤μΊ”ν•  μ»΄ν¬λ„νΈλ¥Ό ν•„ν„°λ§ν•  μ μλ‹¤.


<br />

### **2) λ‹¤λ¥Έ ν¨ν‚¤μ§€, Bean λ“±λ΅**

: λ‹¤μμ€ λ‹¤λ¥Έ ν¨ν‚¤μ§€μ— μλ” μ»΄ν¬λ„νΈλ¥Ό Beanμ— λ“±λ΅ν•λ” λ°©λ²• μ¤‘ ν•λ‚μ΄λ‹¤.

```java
@SpringBootApplication
public class DemoApplication {

   @Autowired
   OtherPack otherPack;  // λ‹¤λ¥Έ ν¨ν‚¤μ§€λΌ intellijκ°€ μ—λ¬λ΅ μΈμ‹. (ν•μ§€λ§, μ‹¤ν–‰ μ‹ errorμ—†μ.)

	public static void main(String[] args) {
		var app = new SpringApplication(DemoApplication.class);
		app.addInitializers(new ApplicationContextInitializer<GenericApplicationContext>() {
			@Override
			public void initialize(GenericApplicationContext ctx) {
				ctx.registerBean(OtherPack.class);   // λ‹¤λ¥Έ ν¨ν‚¤μ§€ ν΄λμ¤λ¥Ό Bean λ“±λ΅
			}
		});
		app.run(args);
	}
}
```


<br />

### **3) @Component**

: μ•„λμ μ–΄λ…Έν…μ΄μ…μ€ λ¨λ‘ @Componentλ¥Ό κ°€μ§€κ³  μλ‹¤.
<br />
- @Repository
- @Service
- @Controller
- @Configuration
<br />


cf) μ‹±κΈ€ν†¤ μ¤μ½”ν”„μΈ Beanμ€ μ΄κΈ°μ— λ‹¤ μƒμ„±μ„ ν•λ‹¤. (μ΄λ° Beanμ΄ λ§μΌλ©΄, μ΄κΈ° κµ¬λ™μ‹κ°„μ΄ μ΅°κΈ κ±Έλ¦΄ μ μλ‹¤.)



<br />

# 1-4. Bean μ¤μ½”ν”„ [π‘†](#λ©μ°¨)

### **1) μ‹±κΈ€ν†¤**

 - μ–΄ν”λ¦¬μΌ€μ΄μ… μ „μ—­μ— κ±Έμ³μ„ ν•΄λ‹Ή Beanμ μΈμ¤ν„΄μ¤κ°€ ν•λ‚μ΄λ‹¤.
 - κΈ°λ³Έ μ¤μ½”ν”„κ°€ μ‹±κΈ€ν†¤μ΄λ‹¤.





<br />

### **2) ν”„λ΅ν† νƒ€μ…**

: 









<br /><br /><br />

# λ©”λ¨

1. mock κ°μ²΄

   : ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•  λ•, **μμ΅΄μ„± λ¬Έμ **λ΅ νΉμ • κ°μ²΄λ¥Ό μƒμ„±ν•λ”λ° μ–΄λ ¤μ΄ κ²½μ° λ§λ“λ” κ°€μ§ κ°μ²΄μ΄λ‹¤.

   [μ‚¬μ©λ²•]

   - mockκ°μ²΄λ¥Ό λ§λ“ λ‹¤. 
     - mock() ν•¨μ μ΄μ©
     - @Mockμ΄μ©
   - when(A).thenReturn(B); 

   [μμ‹]

   ```java
   @Mock
   BookRepository bookRepository; // calλ©”μ†λ“ : 10μ„ λ°ν™ν•λ” λ©”μ†λ“
   
   @Test
   public void calTest(){
     when(bookRepository.cal()).thenReturn(10);
   }
   ```

   


